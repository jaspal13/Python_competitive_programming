from collections import defaultdict
from typing import List

class Graph:
    def __init__(self, stones):
        self.graph = defaultdict(list)
        self.visited = dict()
        for i in stones:
            self.visited[str(i)] = False
        self.count = 0

    def addEdge(self,u,v):
        if v not in self.graph[u]:
            self.graph[u].append(v)
        if u not in self.graph[v]:
            self.graph[v].append(u)

    def DFS_util(self,s):
        stack = []
        stack.append(s)
        self.visited[s]=True
        while stack:
            s1 = stack.pop()
            for node in self.graph[s1]:
                if not self.visited[node]:
                    stack.append(node)
                    self.count += 1
                    self.visited[node] = True

    def DFS(self):
        for j in self.visited:
            if not self.visited[j]:
                self.DFS_util(j)

class Solution:
    def removeStones(self, stones: List[List[int]]) -> int:
        g = Graph(stones)
        stones = sorted(stones, key = lambda x:x[0])
        for i in range(len(stones)-1):
            if stones[i][0]==stones[i+1][0] or stones[i][1]==stones[i+1][1]:
                g.addEdge(str(stones[i]),str(stones[i+1]))
        stones = sorted(stones, key=lambda x: x[1])
        for i in range(len(stones)-1):
            if stones[i][0]==stones[i+1][0] or stones[i][1]==stones[i+1][1]:
                g.addEdge(str(stones[i]),str(stones[i+1]))
        g.DFS()
        return (g.count)







#input = [[0,0],[0,2],[1,1],[2,0],[2,2]]
#input = [[0,0],[0,1],[1,0],[1,2],[2,1],[2,2]]
#input = [[0,0]]
#input = [[0,1],[1,0],[1,1]]##
input = [[18,55],[5,68],[71,32],[78,48],[77,24],[73,53],[5,44],[87,72],[90,21],[17,95],[67,19],[70,76],[28,26],[52,15],[27,73],[25,72],[43,42],[64,85],[87,42],[71,97],[77,14],[5,71],[89,6],[87,23],[20,75],[15,92],[99,63],[6,25],[96,82],[88,98],[24,76],[29,47],[34,36],[72,11],[18,60],[40,57],[88,30],[77,66],[83,95],[28,93],[61,41],[49,94],[30,72],[63,58],[4,16],[70,35],[82,19],[90,68],[37,0],[0,30],[99,58],[0,99],[69,8],[94,70],[75,71],[97,88],[36,41],[54,90],[10,51],[35,75],[16,18],[9,75],[31,89],[2,37],[30,38],[57,54],[87,13],[43,7],[74,38],[47,87],[61,72],[65,59],[28,22],[14,33],[54,71],[2,12],[70,39],[57,60],[55,4],[2,87],[85,15],[0,21],[49,41],[22,45],[21,27],[71,98],[2,90],[73,9],[89,44],[11,19],[50,70],[63,88],[89,33],[27,5],[41,56],[28,6],[43,45],[87,80],[35,3],[26,33],[11,9],[94,97],[17,84],[31,17],[98,87],[78,33],[68,12],[32,30],[10,32],[68,31],[21,99],[2,7],[62,32],[11,62],[0,93],[89,88],[86,22],[70,95],[78,56],[52,14],[86,7],[16,20],[98,88],[57,87],[55,36],[95,11],[34,38],[69,32],[42,38],[70,30],[18,48],[57,64],[86,5],[77,94],[90,13],[36,65],[61,5],[47,86],[91,78],[50,66],[33,17],[53,9],[91,43],[44,42],[82,11],[11,27],[59,96],[7,14],[87,74],[0,78],[72,75],[38,10],[34,33],[73,80],[11,33],[1,70],[99,70],[58,74],[71,11],[21,51],[37,62],[12,66],[59,1],[56,50],[63,96],[58,61],[92,92],[71,50],[62,86],[44,69],[22,91],[15,6],[18,18],[50,63],[4,89],[46,73],[29,90],[93,69],[58,18],[10,11],[86,95],[3,79],[78,57],[10,83],[49,33],[39,50],[13,59],[70,52],[60,15],[92,65],[31,58],[72,7],[28,96],[82,60],[30,56],[36,43],[52,16],[10,49],[7,59],[14,89],[82,7],[16,96],[60,78],[41,4],[12,10],[99,59],[38,88],[37,30],[74,11],[26,0],[8,11],[58,86],[40,53],[54,16],[95,26],[47,63],[99,95],[83,66],[66,35],[95,23],[33,81],[68,56],[83,0],[5,28],[61,26],[83,62],[32,60],[80,95],[19,9],[30,35],[7,88],[39,94],[90,41],[2,0],[51,2],[33,19],[92,97],[46,64],[3,70],[99,17],[61,16],[52,48]]
#input = [[2622,302],[901,359],[826,2115],[1824,1970],[2890,2354],[1094,2392],[2788,2813],[2994,0],[2175,969],[1919,2308],[1892,1424],[558,1452],[750,232],[1691,1440],[1859,66],[1200,8],[2441,1422],[2150,136],[1236,1027],[1018,288],[2471,1758],[2896,1088],[977,1433],[660,2963],[796,1747],[2926,1500],[60,2110],[2972,1180],[2898,1000],[2311,215],[2996,1645],[2391,2737],[2305,282],[220,2039],[1621,279],[369,767],[1477,1551],[929,1405],[1080,2219],[610,1774],[295,1124],[1645,2],[319,1906],[1440,2099],[2353,2411],[16,29],[2790,2723],[2741,241],[2321,526],[76,2485],[261,2474],[2143,1511],[388,1480],[353,813],[1738,134],[1352,1621],[28,771],[306,605],[148,328],[640,2016],[908,2222],[403,2214],[2221,783],[397,1128],[1268,239],[2787,43],[1729,1540],[1251,840],[349,1004],[1684,1544],[2353,1325],[690,2772],[2793,2695],[2713,1085],[2451,2428],[503,2236],[1667,1335],[1792,1485],[2439,2288],[815,645],[1940,1580],[2174,614],[578,2143],[2478,173],[622,2828],[1137,1292],[1674,407],[2859,1170],[2843,265],[2383,240],[2576,396],[2429,2086],[1545,2222],[2967,499],[401,2559],[419,2930],[1204,489],[2173,269],[2098,2111],[1395,638],[2493,1874],[958,320],[1367,2044],[2102,1551],[1831,13],[1668,1819],[791,2132],[903,2686],[1184,2544],[613,1210],[1166,1289],[2860,2478],[1050,693],[2450,2993],[1038,1958],[2764,997],[1640,220],[2125,2441],[1350,2766],[2345,2841],[1977,1303],[1381,436],[424,1887],[125,1731],[767,20],[1405,2745],[674,2310],[1048,2567],[567,2161],[2339,1889],[291,2930],[2063,1874],[1886,2782],[1059,2769],[2558,966],[1329,871],[186,2039],[2408,2143],[2178,951],[2776,2178],[740,1621],[1717,913],[1399,1798],[2833,1905],[323,943],[606,2818],[1181,2361],[1728,2013],[2987,2159],[782,1911],[2847,2283],[1526,2008],[2574,325],[2506,1048],[1058,2494],[2208,2322],[412,1960],[2487,404],[1604,57],[1053,813],[2735,178],[839,372],[1391,187],[383,2789],[183,570],[1576,2781],[874,2219],[2757,1820],[194,1626],[1848,361],[1320,2478],[566,758],[515,1300],[2957,2291],[2113,2603],[709,2101],[518,516],[2923,2978],[1970,2362],[207,2022],[950,2951],[893,2755],[1315,1319],[174,2685],[2051,2582],[1793,1104],[299,1244],[1563,2086],[812,1642],[2941,336],[1463,1669],[1604,901],[499,2298],[1677,847],[522,1747],[1770,1113],[1594,1183],[1812,1226],[447,2818],[2034,1746],[2087,491],[256,1667],[1917,2799],[2973,2746],[2037,2541],[2822,2190],[2691,2553],[2635,747],[12,320],[186,2403],[2797,2894],[536,446],[855,2127],[977,2117],[773,1968],[906,807],[340,1256],[253,1674],[604,8],[2163,1804],[2895,1223],[1343,1691],[2676,2717],[1392,1370],[756,657],[348,2360],[377,816],[30,288],[1352,2412],[1377,603],[260,2289],[1892,1390],[1765,1549],[3,1128],[2922,440],[2852,387],[2807,1511],[1879,2233],[278,1753],[1683,614],[583,710],[90,2394],[983,1768],[1891,1215],[2775,2478],[264,2938],[931,1166],[47,2641],[516,1820],[552,1517],[552,2817],[264,149],[1650,177],[286,1290],[518,2861],[2547,2076],[340,215],[2734,2707],[756,1131],[923,1892],[1572,2659],[2310,2810],[700,294],[231,2259],[1555,92],[1335,1265],[1167,2110],[811,2748],[1215,2938],[1783,2350],[2168,504],[1157,696],[2099,694],[2264,1035],[51,1707],[1451,1040],[2350,2577],[795,1556],[2387,1267],[1100,2209],[2873,2360],[1649,171],[63,1072],[1967,41],[2138,2164],[36,275],[760,197],[2047,76],[1247,1368],[2419,1056],[922,1715],[2336,128],[746,11],[404,2337],[2589,363],[1786,2085],[1716,700],[1941,273],[31,318],[1123,1304],[2839,1459],[1970,1795],[1020,348],[1200,2390],[1636,2689],[2947,2363],[70,1230],[830,2144],[2579,504],[826,2231],[1321,1426],[2572,1411],[136,1635],[1569,2490],[957,2260],[733,2560],[300,1937],[2497,24],[48,2656],[1250,1073],[747,1225],[347,711],[1949,76],[577,230],[2148,1174],[415,2366],[622,1474],[201,730],[1184,2517],[2453,464],[2262,2356],[2074,2112],[652,583],[295,2853],[610,217],[2433,2023],[2183,395],[2919,957],[1720,74],[2372,448],[504,2760],[2852,2214],[1970,2199],[567,2894],[192,2917],[2182,208],[292,1302],[1895,1236],[2437,1609],[1577,353],[1924,466],[2622,706],[394,862],[196,287],[145,2419],[771,2499],[198,2309],[1635,789],[1787,2922],[2525,1186],[1934,1685],[1310,723],[420,2434],[2060,1129],[1869,1196],[109,1080],[2260,2552],[1147,1144],[1394,2503],[1871,391],[2528,1668],[1209,2858],[335,571],[2836,1752],[2230,1211],[151,2813],[867,1438],[1928,2708],[2091,2839],[2686,1482],[2837,1830],[270,489],[807,258],[2297,171],[114,1923],[1330,729],[2833,71],[1835,636],[1924,2108],[577,1670],[774,2008],[1272,2060],[412,2541],[2260,1571],[379,39],[1831,1669],[1822,2928],[915,2839],[1275,841],[762,620],[2046,454],[178,557],[851,2793],[2333,2793],[2255,1689],[970,1459],[1449,1832],[1727,2629],[2214,2591],[72,1415],[864,1187],[1621,1639],[1893,450],[2604,1782],[1053,27],[1342,2700],[138,1054],[542,1536],[843,3],[2837,2897],[892,588],[145,495],[1012,569],[1549,1432],[691,100],[972,1951],[56,2305],[2269,2917],[766,2784],[1667,2914],[1542,626],[934,1319],[2059,1759],[2309,2642],[1254,25],[1099,2653],[906,1080],[2116,2156],[2398,606],[1821,1294],[2241,2173],[10,616],[1099,2602],[2998,685],[1462,1420],[233,2623],[2878,471],[1188,2062],[2339,1265],[233,1574],[428,1048],[1094,2890],[586,921],[1766,1780],[1378,1709],[2263,1179],[446,2009],[1395,338],[770,1584],[1480,500],[1299,920],[569,699],[2419,1846],[438,284],[1949,1530],[683,2035],[1979,2455],[927,968],[1501,499],[899,1527],[2714,2883],[2252,2822],[28,1706],[440,95],[2922,1428],[1180,2469],[154,1505],[2519,1437],[1670,2193],[2706,2177],[2215,2767],[2348,846],[1850,2028],[142,76],[808,616],[2552,1772],[1964,2141],[2696,2310],[1938,1627],[2534,240],[483,1998],[1432,1186],[1600,1435],[2268,4],[1189,1866],[1130,1062],[2842,1269],[2161,2709],[1587,2985],[137,2225],[533,1895],[1470,408],[371,1822],[610,2682],[2919,884],[229,2668],[685,2341],[2666,2809],[643,2568],[237,2449],[98,493],[2028,305],[587,179],[2822,174],[297,417],[1117,2387],[708,1925],[2114,2134],[1344,133],[350,1726],[1516,1751],[2554,2873],[2927,172],[2341,521],[783,822],[387,657],[2454,888],[2883,2454],[2551,72],[368,1524],[952,2613],[1508,1278],[2551,249],[231,2659],[2486,1080],[1768,1046],[2455,503],[2115,1374],[1148,1256],[2267,1631],[2108,473],[883,213],[1217,757],[1529,715],[1580,2866],[2930,1496],[2299,2994],[91,486],[754,1690],[402,519],[56,1379],[11,1589],[299,1977],[2416,1965],[2964,845],[2990,2545],[2534,1333],[474,4],[868,2200],[2459,1768],[2731,2831],[2991,229],[2979,549],[2325,411],[2254,1651],[1520,1690],[2755,2599],[2623,2593],[828,1029],[222,1804],[228,329],[1703,1414],[1743,629],[888,1155],[1118,2469],[2027,358],[1891,311],[951,1534],[225,1590],[186,820],[1821,2760],[757,1467],[946,2946],[2564,2961],[70,830],[1977,2362],[1157,20],[723,672],[2521,1463],[1495,1271],[2521,1442],[1724,911],[891,2091],[305,1420],[1431,315],[940,1526],[1681,964],[548,2502],[2795,551],[2279,2938],[1255,243],[405,2082],[2072,1578],[361,2494],[2765,2920],[1692,115],[834,1759],[1349,2732],[2998,762],[2983,114],[721,2783],[1178,360],[422,1430],[1647,1092],[107,272],[1624,249],[2621,1202],[334,1797],[2493,851],[265,1782],[2742,622],[1381,2901],[57,1765],[2994,2190],[22,1701],[2113,2737],[677,2863],[1480,445],[1423,83],[694,107],[1875,20],[724,2223],[1184,1441],[1059,99],[837,2229],[1501,1790],[1119,1203],[1023,858],[226,2698],[2564,2466],[956,2648],[917,1742],[1143,734],[792,1873],[838,1524],[2184,2877],[1223,299],[904,422],[1513,1656],[592,1254],[2185,1417],[2710,2409],[1284,2036],[2365,656],[2681,2839],[1323,1735],[845,1807],[1179,595],[829,342],[1245,814],[1005,635],[2106,403],[2224,106],[1165,1305],[2068,2303],[852,2804],[2821,788],[108,120],[207,2088],[349,1550],[2375,930],[69,734],[875,1610],[1784,1362],[897,1196],[424,214],[284,1366],[1178,1706],[2711,2797],[2812,838],[48,1752],[2766,1567],[2502,2319],[2621,1012],[2665,188],[2147,2965],[2401,2661],[328,144],[260,2518],[276,2028],[2963,26],[109,1446],[1272,270],[2184,1991],[2315,1327],[1349,2978],[1694,2848],[2240,666],[1860,1330],[1520,635],[2860,1124],[2421,2090],[1656,2534],[614,1787],[2004,2033],[464,1937],[2286,528],[257,1964],[521,2351],[2794,2631],[2664,416],[701,1397],[2028,626],[99,2436],[971,2963],[1364,922],[1827,2],[1129,1971],[2416,1604],[1380,2148],[846,2744],[2199,2901],[2867,483],[2448,115],[2501,1693],[380,110],[150,1378],[453,2730],[1392,925],[2319,1921],[2168,2243],[785,1299],[805,1914],[273,1433],[1661,3],[1838,2868],[816,2929],[1082,1816],[1541,1407],[1306,1428],[114,664],[1755,1799],[949,2431],[735,227],[1455,2126],[1619,2868],[2865,49],[1830,498],[289,1945],[2432,212],[2949,913],[791,802],[2891,2650],[1841,1076],[2307,1285],[1526,948],[1037,919],[1061,2085],[2779,1909],[372,1461],[1835,1602],[982,570],[645,2830],[2846,2833],[205,775],[558,1013],[413,2574],[302,2315],[2897,19],[1787,2039],[2819,1256],[2328,417],[116,388],[1983,2880],[1315,1016],[2922,2864],[2404,2671],[44,312],[929,2482],[1203,783],[544,1680],[2403,2385],[2629,2019],[991,892],[2570,2216],[1835,2795],[2707,61],[1657,953],[2721,1541],[2257,696],[2226,726],[1415,1567],[2655,2292],[786,91],[266,1009],[1024,1555],[2776,246],[1907,2059],[1873,2287],[323,207],[1478,2407],[572,1118],[1148,649],[161,2757],[468,1171],[1711,2540],[727,1683],[1743,1495],[2155,2494],[2050,191],[2190,2404],[2624,216],[2361,1062],[1054,2408],[376,1229],[1946,2382],[15,1589],[966,1663],[712,1642],[2620,995],[2077,1464],[1090,1647],[1666,1672],[2638,1826],[822,2981],[841,1648],[1159,1226],[2350,2990],[2089,2270],[200,2832],[2029,118],[421,365],[1969,1215],[2301,1601],[2545,2735],[1480,887],[2696,650],[473,743],[1876,2761],[2782,1126],[2757,2884],[752,1532],[1994,2447],[2787,937],[1198,2287],[214,741],[1395,1974],[1381,1143],[1389,684],[300,2929],[2046,1485],[2168,2657],[2165,743],[2271,2346],[76,766],[1669,1136],[1763,1901],[2082,2709],[2110,267],[736,2377],[637,1890],[2744,321],[2360,586],[254,998],[2847,711],[1417,1268],[2411,1893],[1477,460],[15,353],[2374,1731],[112,1462],[853,120],[612,355],[1224,101],[1315,2146],[2383,2936],[2114,747],[227,1544],[2503,1203],[2413,861],[385,830],[2140,2290],[1687,796],[2349,2906],[2629,206],[2833,2285],[1976,1117],[1847,1215],[417,2999],[2164,170],[1731,434],[170,737],[2047,1492],[2045,2148],[1792,273],[1964,1588],[2483,1039],[2042,2123],[2494,1881],[939,2556],[2163,400],[1202,2053],[2863,1185],[2958,635],[2244,1975],[563,921],[2431,1399],[1319,1162],[1518,643],[2071,2782],[373,2166],[2982,1756],[374,2513],[326,928],[2346,114],[1971,2456],[867,261],[1089,1983],[236,949],[1933,88],[2166,1878],[854,785],[345,2675],[675,446],[1419,1667],[1878,2820],[2623,440],[2878,2387],[1534,1754],[1656,1436],[2077,1897],[906,985],[173,1862],[430,1753],[352,1943],[2940,2270],[2696,448],[870,2107],[2836,2956],[856,834],[2083,2938],[1872,819],[1582,509],[2774,1300],[1813,2907],[2141,181],[2559,154],[1859,2293],[1145,2989],[1581,1895],[1310,1727],[470,1420],[2682,1895],[485,2908],[1977,310],[2394,1135],[1524,1367],[349,1097],[2550,1497],[70,2901],[2565,1081],[2321,1592],[451,1545],[644,312],[1677,1866],[1834,2143],[1312,1494],[2036,1369],[182,1306],[1881,428],[136,510],[2396,1646],[158,1811],[787,2069],[719,2006],[2952,2616],[653,792],[2504,1557],[2113,2577],[769,1231],[1784,2744],[1839,2856],[1594,1297],[2885,763],[451,785],[2767,763],[698,1102],[799,528],[670,936],[52,1195],[2342,1901],[2847,1428],[899,2938],[634,435],[2911,2401],[504,2984],[1103,759],[1915,793],[2592,1255],[125,2113]]
s = Solution()
print(s.removeStones(input))
